<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…ØªØ¬Ø± Ø±ÙˆØ² Ù„Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø± Ù…Ù† GitHub -->
  <link rel="icon" type="image/png"
        href="https://raw.githubusercontent.com/tmembaradan-hash/ROSE_STORE/main/ose-logo.png">

  <style>
    :root {
      /* Ø£Ù„ÙˆØ§Ù† Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø´Ø¹Ø§Ø± ROSE (Ø¹Ù†Ø§Ø¨ÙŠ + Ø°Ù‡Ø¨ÙŠ) */
      --primary-dark: #6b1230;   /* Ø¹Ù†Ø§Ø¨ÙŠ ØºØ§Ù…Ù‚ */
      --primary: #b56a2b;        /* Ø°Ù‡Ø¨ÙŠ Ù…Ø§Ø¦Ù„ Ù„Ù„Ù†Ø­Ø§Ø³ÙŠ */
      --gold-soft: #f7e2b8;
      --bg: #fdf7f5;             /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© */
      --card: #ffffff;
      --radius: 16px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Cairo", system-ui, sans-serif;
      background: radial-gradient(circle at top, #fbe9e6, #fdf7f5);
      color: #222;
      font-size: 16px;
    }

    header {
      background: radial-gradient(circle at top, #8b1639, #3d0716);
      color: #fff;
      padding: 10px 12px 8px;
      position: sticky;
      top: 0;
      z-index: 10;
      box-shadow: 0 3px 10px rgba(0,0,0,0.35);
    }

    .header-inner {
      max-width: 960px;
      margin: 0 auto;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }

    .header-logo {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 0 0 3px rgba(255,215,128,0.8);
      background: #fff;
    }

    .header-text h1 {
      margin: 0;
      font-size: 1.5rem;
      letter-spacing: 0.05em;
    }

    .header-text p {
      margin: 2px 0 0;
      font-size: 0.85rem;
      opacity: 0.96;
    }

    .nav-tabs {
      display: flex;
      margin-top: 10px;
      background: rgba(0,0,0,0.35);
      border-radius: 999px;
      padding: 3px;
    }

    .nav-tab {
      flex: 1;
      text-align: center;
      padding: 7px 4px;
      font-size: 0.9rem;
      border-radius: 999px;
      cursor: pointer;
      color: #fbe0e0;
      user-select: none;
      transition: background 0.15s, color 0.15s, transform 0.1s;
    }

    .nav-tab:hover {
      transform: translateY(-1px);
    }

    .nav-tab.active {
      background: linear-gradient(135deg, #fdf3df, #f7e0b6);
      color: #65122e;
      font-weight: 600;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 12px;
    }

    section {
      display: none;
    }

    section.active {
      display: block;
      animation: fadeIn 0.25s ease-out;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(6px);}
      to {opacity: 1; transform: translateY(0);}
    }

    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
    .menu-controls {
      display: flex;
      gap: 8px;
      margin: 10px 0;
      flex-wrap: wrap;
    }

    .menu-controls input,
    .menu-controls select {
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid #d6b99a;
      font-family: inherit;
      font-size: 1rem;
      flex: 1;
      min-width: 120px;
      background: #fffaf5;
    }

    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 10px;
    }

    .menu-item {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 1px 8px rgba(0,0,0,0.08);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      border: 1px solid rgba(181,106,43,0.15);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .menu-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    }

.menu-img {
  width: 100%;
  height: 250px;
  background-size: cover;
  background-position: top center;
  border-radius: 12px;
}


    .menu-content {
      padding: 9px 11px 11px;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .menu-item h3 {
      margin: 0;
      font-size: 0.95rem;
    }

    .menu-category {
      font-size: 0.75rem;
      color: #8a5f4b;
      margin-top: 2px;
    }

    .menu-desc {
      font-size: 0.78rem;
      color: #555;
      margin-top: 3px;
      min-height: 2.3em;
    }

    .menu-tags {
      font-size: 0.7rem;
      color: #7a6a5a;
      margin-top: 4px;
    }

    .menu-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 6px;
    }

    .menu-price {
      color: var(--primary-dark);
      font-weight: bold;
      font-size: 0.9rem;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 7px 11px;
      font-size: 0.9rem;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.1s, box-shadow 0.1s, background 0.15s;
    }

    .btn:active {
      transform: scale(0.96);
    }

    .btn-primary {
      background: linear-gradient(135deg, #b56a2b, #e3b66f);
      color: #3a0714;
      box-shadow: 0 2px 5px rgba(0,0,0,0.18);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #c77b37, #f2d18a);
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid #d0c0aa;
      color: #5a3d2a;
    }

    /* Ø§Ù„Ø³Ù„Ø© */
    .two-cols {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .two-cols = {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 1px 6px rgba(0,0,0,0.08);
      padding: 12px;
      font-size: 0.9rem;
      border: 1px solid rgba(181,106,43,0.12);
    }

    .card h2 {
      margin: 0 0 8px;
      font-size: 1rem;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card h2::before {
      content: "";
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: radial-gradient(circle, #fbe2a8, #b56a2b);
    }

    .cart-empty {
      color: #777;
      font-size: 0.85rem;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-size: 0.87rem;
    }

    .cart-item-controls button {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #ccc;
      background: #f9f4ef;
      cursor: pointer;
      font-size: 0.85rem;
    }

    .cart-total {
      margin-top: 8px;
      font-weight: bold;
      text-align: left;
      color: var(--primary-dark);
    }

    .cart-bump {
      animation: cartShake 0.35s ease;
    }

    @keyframes cartShake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      50% { transform: translateX(3px); }
      75% { transform: translateX(-2px); }
      100% { transform: translateX(0); }
    }

    .checkout-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .checkout-grid label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 2px;
    }

    .checkout-grid input,
    .checkout-grid textarea {
      width: 100%;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid #d6b99a;
      font-family: inherit;
      font-size: 1rem;
      background: #fffdf8;
    }

    .checkout-grid textarea {
      min-height: 60px;
      grid-column: 1 / span 2;
    }

    .status-message {
      margin-top: 8px;
      font-size: 0.8rem;
    }

    .status-message.success {
      color: #0a7e2a;
    }

    .status-message.error {
      color: #b00020;
    }

    /* ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨ */
    .track-form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-bottom: 10px;
      font-size: 0.9rem;
    }

    .track-form label {
      font-size: 0.8rem;
    }

    .track-form input {
      width: 100%;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid #d6b99a;
      font-size: 1rem;
      background: #fffdf8;
    }

    .track-result {
      margin-top: 8px;
      font-size: 0.85rem;
    }

    .track-card {
      padding: 8px;
      border-radius: 10px;
      background: #fff8f0;
      border: 1px solid #f1d0aa;
      margin-bottom: 6px;
    }

    .track-status {
      font-weight: 600;
      color: var(--primary-dark);
    }

    /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© */
    .admin-login {
      display: grid;
      grid-template-columns: minmax(0, 1fr) auto;
      gap: 6px;
      align-items: center;
      margin-bottom: 10px;
    }

    .admin-login input {
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid #d6b99a;
      font-family: inherit;
      font-size: 1rem;
      background: #fffdf8;
    }

    .admin-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
      font-size: 0.8rem;
    }

    .admin-filters select {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #d6b99a;
      font-family: inherit;
      font-size: 0.9rem;
      background: #fffdf8;
    }

    .admin-orders {
      max-height: 320px;
      overflow-y: auto;
      font-size: 0.8rem;
    }

    .admin-order {
      border-radius: 12px;
      background: #fff7f3;
      border: 1px solid #f0d0b3;
      padding: 8px;
      margin-bottom: 8px;
    }

    .admin-order-header {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .admin-badge {
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 0.7rem;
      color: #fff;
    }

    .badge-new { background: #8e24aa; }
    .badge-preparing { background: #ffa000; }
    .badge-ready { background: #1976d2; }
    .badge-done { background: #388e3c; }

    .admin-order-body-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 2px;
    }

    .admin-order-body-row span.label {
      font-weight: 600;
    }

    .admin-order-footer {
      margin-top: 6px;
      display: flex;
      gap: 6px;
      align-items: center;
      justify-content: space-between;
    }

    .admin-order-footer select {
      padding: 3px 6px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 0.75rem;
    }

    /* ÙƒØ§Ø±Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
    .admin-products-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 800px) {
      .admin-products-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .product-form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .product-form-grid label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 2px;
    }

    .product-form-grid input,
    .product-form-grid textarea {
      width: 100%;
      padding: 6px 8px;
      border-radius: 9px;
      border: 1px solid #d6b99a;
      font-family: inherit;
      font-size: 0.9rem;
      background: #fffdf8;
    }

    .product-form-grid textarea {
      grid-column: 1 / span 2;
      min-height: 60px;
    }

    .admin-products-list {
      max-height: 250px;
      overflow-y: auto;
      font-size: 0.8rem;
    }

    .admin-product-item {
      padding: 6px;
      border-radius: 10px;
      background: #fdf3e8;
      border: 1px solid #f0d0aa;
      margin-bottom: 5px;
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .admin-product-thumb {
      width: 42px;
      height: 42px;
      border-radius: 10px;
      background-size: cover;
      background-position: center;
      background-color: #e4c4af;
      flex-shrink: 0;
    }

    /* Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ø§Ø¦Ù… */
    .whatsapp-button {
      position: fixed;
      bottom: 16px;
      right: 16px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #25D366;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.35);
      cursor: pointer;
      z-index: 1000;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }

    .whatsapp-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 14px rgba(0,0,0,0.4);
    }

    .whatsapp-button svg {
      width: 28px;
      height: 28px;
      display: block;
    }

    .footer {
      max-width: 960px;
      margin: 8px auto 16px;
      text-align: center;
      font-size: 0.72rem;
      color: #777;
    }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="header-top">
      <img src="https://raw.githubusercontent.com/tmembaradan-hash/ROSE_STORE/main/ose-logo.png"
           alt="ROSE GENERAL TRADE" class="header-logo">
      <div class="header-text">
        <h1>ROSE GENERAL TRADE</h1>
        <p>Ù…ØªØ¬Ø± Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆÙ…Ù†ØªØ¬Ø§Øª Ø±Ù‚Ù…ÙŠØ© ÙˆÙ…Ù„Ù…ÙˆØ³Ø© â€“ ØªØ¬Ø±Ø¨Ø© Ø´Ø±Ø§Ø¡ Ø£Ù†ÙŠÙ‚Ø© ÙˆØ³Ù‡Ù„Ø© ğŸŒ¹</p>
      </div>
    </div>

    <div class="nav-tabs">
      <div class="nav-tab active" data-tab="shopTab">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</div>
      <div class="nav-tab" data-tab="trackTab">ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨</div>
      <div class="nav-tab" data-tab="adminTab">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</div>
    </div>
  </div>
</header>

<div class="container">

  <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…ØªØ¬Ø± -->
  <section id="shopTab" class="active">
    <div class="two-cols">

      <div>
        <div class="card">
          <h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
          <div class="menu-controls">
            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¨Ø·Ø§Ù‚Ø© Ø£Ùˆ Ù…Ù†ØªØ¬...">
            <select id="categoryFilter">
              <option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
            </select>
          </div>
          <div id="menu" class="menu-grid"></div>
        </div>
      </div>

      <div>
        <div class="card" id="cartCard">
          <h2>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h2>
          <div id="cart-content"></div>
          <div class="cart-total" id="cart-total"></div>
        </div>

        <div class="card" style="margin-top:10px;">
          <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h2>
          <div class="checkout-grid">
            <div>
              <label>Ø§Ù„Ø§Ø³Ù…</label>
              <input type="text" id="customerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
            </div>
            <div>
              <label>Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</label>
              <input type="tel" id="phone" placeholder="09xxxxxxxx">
            </div>
            <div>
              <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø¥Ù† ÙˆØ¬Ø¯)</label>
              <input type="text" id="address" placeholder="Ù…Ø¯ÙŠÙ†Ø© - Ø­ÙŠ - ØªÙØ§ØµÙŠÙ„">
            </div>
            <div>
              <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨</label>
              <textarea id="notes" placeholder="Ù…Ø«Ø§Ù„: Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨..."></textarea>
            </div>
          </div>
          <button class="btn btn-primary" id="submitOrderBtn" style="margin-top:8px; width:100%;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
          <div id="status" class="status-message"></div>
        </div>
      </div>

    </div>
  </section>

  <!-- ØªØ¨ÙˆÙŠØ¨ ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨ -->
  <section id="trackTab">
    <div class="card">
      <h2>ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
      <div class="track-form">
        <div>
          <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <input type="text" id="trackOrderId" placeholder="Ù…Ø«Ø§Ù„: ORD-5">
        </div>
        <div>
          <label>Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</label>
          <input type="tel" id="trackPhone" placeholder="09xxxxxxxx">
        </div>
      </div>
      <button class="btn btn-primary" id="trackBtn">Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø©</button>
      <div id="trackResult" class="track-result"></div>
    </div>
  </section>

  <!-- ØªØ¨ÙˆÙŠØ¨ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
  <section id="adminTab">
    <div class="card">
      <h2>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ¬Ø±</h2>

      <div class="admin-login">
        <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">
        <button class="btn btn-primary" id="adminLoginBtn">Ø¯Ø®ÙˆÙ„</button>
      </div>

      <div id="adminArea" style="display:none;">
        <div class="admin-products-grid">

          <!-- ÙƒØ§Ø±Øª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
          <div>
            <h3 style="margin-top:0; color:var(--primary-dark);">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
            <div class="admin-filters">
              <span>ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©:</span>
              <select id="adminStatusFilter">
                <option value="ALL">ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                <option value="Ø¬Ø¯ÙŠØ¯">Ø¬Ø¯ÙŠØ¯</option>
                <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±">Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±</option>
                <option value="Ø¬Ø§Ù‡Ø²">Ø¬Ø§Ù‡Ø²</option>
                <option value="ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
              </select>
            </div>
            <div id="adminStatus" class="status-message"></div>
            <div id="adminOrders" class="admin-orders"></div>
          </div>

          <!-- ÙƒØ§Ø±Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
          <div>
            <h3 style="margin-top:0; color:var(--primary-dark);">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
            <div class="product-form-grid">
              <div>
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                <input type="text" id="prodName">
              </div>
              <div>
                <label>Ø§Ù„ÙØ¦Ø©</label>
                <input type="text" id="prodCategory" placeholder="Ø¨Ø·Ø§Ù‚Ø§ØªØŒ Ø£Ù„Ø¹Ø§Ø¨ØŒ Ø±ØµÙŠØ¯...">
              </div>
              <div>
                <label>Ø§Ù„Ø³Ø¹Ø±</label>
                <input type="number" id="prodPrice" min="0" step="1">
              </div>
              <div>
                <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
                <input type="text" id="prodImageUrl" placeholder="https://...">
              </div>
              <div>
                <label>ÙˆØ³ÙˆÙ… / ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©</label>
                <input type="text" id="prodTags" placeholder="Ù…Ø«Ø§Ù„: Ø³ØªÙŠÙ…, ÙƒØ§Ø±Ø¯, Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†">
              </div>
              <div>
                <label>Ø§Ù„ÙˆØµÙ</label>
                <textarea id="prodDescription" placeholder="Ø´Ø±Ø­ Ù…Ø®ØªØµØ± Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©"></textarea>
              </div>
            </div>
            <button class="btn btn-primary" id="addProductBtn" style="margin-top:8px; width:100%;">Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>
            <div id="prodStatus" class="status-message"></div>

            <h4 style="margin:12px 0 6px; color:var(--primary-dark);">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h4>
            <div id="adminProductsList" class="admin-products-list"></div>
          </div>

        </div>
      </div>
    </div>
  </section>

</div>

<div class="footer">
  ROSE GENERAL TRADE Â© 2025 â€” ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google Apps Script ÙˆGoogle Sheets
</div>

<!-- Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ -->
<div class="whatsapp-button" onclick="openWhatsApp()" aria-label="Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨">
  <svg viewBox="0 0 32 32" aria-hidden="true">
    <circle cx="16" cy="16" r="16" fill="none"></circle>
    <path fill="#ffffff" d="M16 6.4c-4.7 0-8.6 3.7-8.6 8.3 0 1.5.4 2.9 1.2 4.2l-0.8 3 3.1-0.8c1.2.7 2.6 1.1 4.1 1.1 4.7 0 8.6-3.7 8.6-8.3S20.7 6.4 16 6.4zm0 14.7c-1.3 0-2.6-.3-3.7-1l-0.3-.2-1.9.5.5-1.8-0.2-.3c-.7-1-1.1-2.2-1.1-3.4 0-3.4 2.8-6.1 6.3-6.1s6.3 2.7 6.3 6.1-2.8 6.1-6.3 6.1zm3.4-4.6c-0.2-.1-1.3-.6-1.5-.7s-.4-.1-.6.1c-.2.2-.7.7-.8.8-.1.1-.3.2-.6.1s-1.2-.5-2.3-1.5c-.8-.7-1.3-1.6-1.4-1.8s0-0.4.1-0.5c.1-.1.2-.3.3-.4.1-.1.1-.2.2-.3.1-.1.1-.2.2-.3.1-.1.1-.2.2-.3.1-.1.1-.2.2-.3.1-.1.1-.2.2-.3 0-.1 0-.2 0-.3s0-.2 0-.3c0-.1-.1-.3-.2-.4-.1-.1-.6-1.4-.9-1.9-.2-.5-.4-.4-.6-.4h-.5c-.2 0-.4.1-.6.3-.2.2-.8.8-.8 2s.9 2.4 1 2.5c.1.1 1.8 2.9 4.3 4.1.6.3 1.1.5 1.5.6.6.2 1.1.2 1.5.1.5-.1 1.3-.5 1.5-1 .2-.5.2-.9.1-1-.1-.1-.2-.1-.4-.2z"></path>
  </svg>
</div>

<script>
  // Ø±Ø§Ø¨Ø· Web App Ù…Ù† Apps Script (Ø§Ù„Ø¬Ø¯ÙŠØ¯)
  const API_URL = "https://script.google.com/macros/s/AKfycbwX8Rzkf6duSsH3RRABNkNggrWcv7OtnNti9iGAEpWdF6L7ytzCbJ4KJDtjapbA0IqzvA/exec";

  // Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ø¨Ø¯ÙˆÙ† +)
  const WHATSAPP_PHONE = "963957482415";

  let PRODUCTS = [];
  let CART = [];
  let ADMIN_TOKEN = '';
  let ADMIN_ORDERS = [];

  /*********** Ø£Ø¯ÙˆØ§Øª Ø¹Ø§Ù…Ø© ***********/
  function escapeHtml_(str) {
    return (str || '').toString()
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');
  }

  function formatDateTime_(val) {
    if (!val) return '';
    const d = new Date(val);
    if (isNaN(d.getTime())) return val;
    return d.toLocaleString('ar-SY');
  }

  /*********** ØªØ¨ÙˆÙŠØ¨Ø§Øª ***********/
  document.querySelectorAll('.nav-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      tab.classList.add('active');

      const target = tab.dataset.tab;
      document.querySelectorAll('section').forEach(sec => {
        sec.classList.toggle('active', sec.id === target);
      });
    });
  });

  /*********** ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ***********/
  async function loadProducts() {
    try {
      const res = await fetch(API_URL + '?action=getProducts');
      const data = await res.json();
      if (!data.success) throw new Error(data.error || 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª');
      PRODUCTS = data.products || [];
      fillCategoryFilter();
      renderProducts();
      renderAdminProductsList();
    } catch (err) {
      document.getElementById('menu').innerHTML =
        '<div>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ' + escapeHtml_(err.message) + '</div>';
    }
  }

  function fillCategoryFilter() {
    const cats = [...new Set(PRODUCTS.map(m => m.category).filter(Boolean))];
    const select = document.getElementById('categoryFilter');
    select.innerHTML = '<option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>';
    cats.forEach(c => {
      const opt = document.createElement('option');
      opt.value = c;
      opt.textContent = c;
      select.appendChild(opt);
    });
  }

  function renderProducts() {
    const menuDiv = document.getElementById('menu');
    menuDiv.innerHTML = '';
    const search = document.getElementById('searchInput').value.trim().toLowerCase();
    const cat = document.getElementById('categoryFilter').value;

    let items = PRODUCTS;
    if (search) {
      items = items.filter(m => {
        const hay = (
          (m.name || '') + ' ' +
          (m.description || '') + ' ' +
          (m.tags || '')
        ).toLowerCase();
        return hay.indexOf(search) !== -1;
      });
    }
    if (cat) {
      items = items.filter(m => m.category === cat);
    }

    if (!items.length) {
      menuDiv.innerHTML = '<div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«.</div>';
      return;
    }

    items.forEach(item => {
      const card = document.createElement('div');
      card.className = 'menu-item';

      const imgDiv = document.createElement('div');
      imgDiv.className = 'menu-img';
      if (item.image_url) {
        imgDiv.style.backgroundImage = `url("${item.image_url}")`;
      } else {
        imgDiv.style.backgroundImage =
          'radial-gradient(circle at top, #fbe2a8, #b56a2b)';
      }

      const content = document.createElement('div');
      content.className = 'menu-content';

      let tagsHtml = '';
      if (item.tags) {
        tagsHtml = '<div class="menu-tags">' + escapeHtml_(item.tags) + '</div>';
      }

      content.innerHTML = `
        <div>
          <h3>${escapeHtml_(item.name)}</h3>
          <div class="menu-category">${escapeHtml_(item.category || '')}</div>
          <div class="menu-desc">${escapeHtml_(item.description || '')}</div>
          ${tagsHtml}
        </div>
        <div class="menu-footer">
          <div class="menu-price">${item.price} Ù„.Ø³</div>
          <button class="btn btn-primary" data-id="${item.id}">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
      `;

      content.querySelector('button').addEventListener('click', () => addToCart(item.id));

      card.appendChild(imgDiv);
      card.appendChild(content);
      menuDiv.appendChild(card);
    });
  }

  document.getElementById('searchInput').addEventListener('input', renderProducts);
  document.getElementById('categoryFilter').addEventListener('change', renderProducts);

  /*********** Ø§Ù„Ø³Ù„Ø© ***********/
  function addToCart(productId) {
    const item = PRODUCTS.find(m => m.id == productId);
    if (!item) return;
    const existing = CART.find(c => c.id == productId);
    if (existing) {
      existing.qty += 1;
    } else {
      CART.push({
        id: item.id,
        name: item.name,
        price: Number(item.price) || 0,
        qty: 1
      });
    }
    renderCart();
    bumpCartAnimation_();
    feedback_();
  }

  function bumpCartAnimation_() {
    const cartCard = document.getElementById('cartCard');
    cartCard.classList.remove('cart-bump');
    void cartCard.offsetWidth;
    cartCard.classList.add('cart-bump');
  }

  function feedback_() {
    if (navigator.vibrate) {
      navigator.vibrate(40);
    }
  }

  function changeQty(productId, delta) {
    const existing = CART.find(c => c.id == productId);
    if (!existing) return;
    existing.qty += delta;
    if (existing.qty <= 0) {
      CART = CART.filter(c => c.id != productId);
    }
    renderCart();
  }

  function renderCart() {
    const cartDiv = document.getElementById('cart-content');
    const totalDiv = document.getElementById('cart-total');

    if (!CART.length) {
      cartDiv.innerHTML = '<div class="cart-empty">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©.</div>';
      totalDiv.textContent = '';
      return;
    }

    let html = '';
    let total = 0;
    CART.forEach(item => {
      const line = item.price * item.qty;
      total += line;
      html += `
        <div class="cart-item">
          <div>
            <div>${escapeHtml_(item.name)}</div>
            <div style="font-size:0.8rem; color:#777;">${item.price} Ù„.Ø³ Ã— ${item.qty}</div>
          </div>
          <div class="cart-item-controls">
            <button onclick="changeQty('${item.id}', 1)">+</button>
            <button onclick="changeQty('${item.id}', -1)">-</button>
          </div>
        </div>
      `;
    });

    cartDiv.innerHTML = html;
    totalDiv.textContent = 'Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ' + total + ' Ù„.Ø³';
  }

  /*********** Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ***********/
  async function submitOrder() {
    if (!CART.length) {
      showStatus('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©ØŒ Ø£Ø¶Ù Ù…Ù†ØªØ¬Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.', false);
      return;
    }

    const customerName = document.getElementById('customerName').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const address = document.getElementById('address').value.trim();
    const notes = document.getElementById('notes').value.trim();

    if (!customerName || !phone) {
      showStatus('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„.', false);
      return;
    }

    const total = CART.reduce((sum, item) => sum + item.price * item.qty, 0);
    const order = {
      customerName,
      phone,
      address,
      notes,
      items: CART,
      total
    };

    showStatus('Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨...', true);

    try {
      await fetch(API_URL, {
        method: 'POST',
        mode: 'no-cors',
        body: JSON.stringify({ action: 'submitOrder', order })
      });

      showStatus(
        'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ğŸŒ¹ Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨. Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ' + total + ' Ù„.Ø³',
        true
      );
      CART = [];
      renderCart();
      document.getElementById('notes').value = '';

      localStorage.setItem('roseCustomerPhone', phone);
      localStorage.setItem('roseCustomerName', customerName);
      localStorage.setItem('roseCustomerAddress', address);
    } catch (err) {
      showStatus('ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ (Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª). Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', false);
    }
  }

  function showStatus(msg, success) {
    const s = document.getElementById('status');
    s.textContent = msg;
    s.className = 'status-message ' + (success ? 'success' : 'error');
  }

  document.getElementById('submitOrderBtn').addEventListener('click', submitOrder);

  /*********** Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ ***********/
  function openWhatsApp() {
    const base = "https://wa.me/" + WHATSAPP_PHONE;

    let lines = [];
    if (CART.length) {
      const customerName = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const address = document.getElementById('address').value.trim();
      const notes = document.getElementById('notes').value.trim();
      const total = CART.reduce((sum, item) => sum + item.price * item.qty, 0);

      lines.push("Ù…Ø±Ø­Ø¨Ø§ØŒ Ø£Ø±ÙŠØ¯ ØªØ£ÙƒÙŠØ¯ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ù…ØªØ¬Ø± ROSE GENERAL TRADE:");
      lines.push("");

      CART.forEach(item => {
        lines.push("- " + item.name + " Ã— " + item.qty + " = " + (item.price * item.qty) + " Ù„.Ø³");
      });

      lines.push("");
      lines.push("Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: " + total + " Ù„.Ø³");

      if (customerName) lines.push("Ø§Ù„Ø§Ø³Ù…: " + customerName);
      if (phone)       lines.push("Ù‡Ø§ØªÙ Ø§Ù„Ø¹Ù…ÙŠÙ„: " + phone);
      if (address)     lines.push("Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: " + address);
      if (notes)       lines.push("Ù…Ù„Ø§Ø­Ø¸Ø§Øª: " + notes);

    } else {
      lines.push("Ù…Ø±Ø­Ø¨Ø§ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ¬Ø± ROSE GENERAL TRADE.");
    }

    const text = encodeURIComponent(lines.join("\n"));
    const url = base + "?text=" + text;
    window.open(url, "_blank");
  }

  /*********** ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨ ***********/
  async function trackOrders() {
    const orderId = document.getElementById('trackOrderId').value.trim();
    const phone = document.getElementById('trackPhone').value.trim();
    const resultDiv = document.getElementById('trackResult');
    resultDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...';

    if (!orderId && !phone) {
      resultDiv.textContent = 'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„.';
      return;
    }

    try {
      const params = new URLSearchParams();
      params.set('action', 'trackOrders');
      if (orderId) params.set('orderId', orderId);
      if (phone) params.set('phone', phone);

      const res = await fetch(API_URL + '?' + params.toString());
      const data = await res.json();
      if (!data.success) throw new Error(data.error || 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØªØ¨Ø¹');

      const orders = data.orders || [];
      if (!orders.length) {
        resultDiv.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©.';
        return;
      }

      let html = '';
      orders.forEach(o => {
        const badge = getStatusBadge_(o.status);
        html += `
          <div class="track-card">
            <div><strong>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</strong> ${o.order_id}</div>
            <div><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${escapeHtml_(formatDateTime_(o.timestamp))}</div>
            <div><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span class="track-status">${badge}</span></div>
            <div><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</strong> ${o.total} Ù„.Ø³</div>
          </div>
        `;
      });

      resultDiv.innerHTML = html;

    } catch (err) {
      resultDiv.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£: ' + err.message;
    }
  }

  function getStatusBadge_(status) {
    const s = status || 'Ø¬Ø¯ÙŠØ¯';
    if (s === 'Ø¬Ø¯ÙŠØ¯') return 'ğŸŸ£ Ø¬Ø¯ÙŠØ¯';
    if (s === 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±') return 'ğŸŸ¡ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°';
    if (s === 'Ø¬Ø§Ù‡Ø²') return 'ğŸ”µ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ³Ù„ÙŠÙ…';
    if (s === 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…') return 'âœ… ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…';
    return s;
  }

  document.getElementById('trackBtn').addEventListener('click', trackOrders);

  /*********** Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© â€“ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ***********/
  async function adminLogin() {
    const password = document.getElementById('adminPassword').value.trim();
    if (!password) return;
    ADMIN_TOKEN = password;

    const statusDiv = document.getElementById('adminStatus');
    statusDiv.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª...';
    statusDiv.className = 'status-message';

    const ok = await loadAdminOrders();

    // âœ… Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø§ ÙÙŠ Ø·Ù„Ø¨Ø§ØªØŒ Ø·Ø§Ù„Ù…Ø§ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØµØ­ÙŠØ­Ø©ØŒ Ù†Ø¯Ø®Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
    if (ok) {
      document.getElementById('adminArea').style.display = 'block';
    }
  }

  async function loadAdminOrders() {
    const statusDiv = document.getElementById('adminStatus');
    const listDiv = document.getElementById('adminOrders');
    listDiv.innerHTML = '';

    if (!ADMIN_TOKEN) {
      statusDiv.textContent = 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø£ÙˆÙ„Ø§Ù‹.';
      statusDiv.className = 'status-message error';
      return false;
    }

    try {
      const params = new URLSearchParams();
      params.set('action', 'getOrders');
      params.set('adminPassword', ADMIN_TOKEN);

      const res = await fetch(API_URL + '?' + params.toString());
      const data = await res.json();
      if (!data.success) {
        statusDiv.textContent = 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±.';
        statusDiv.className = 'status-message error';
        return false;
      }

      ADMIN_ORDERS = data.orders || [];
      statusDiv.textContent = 'ØªÙ… ØªØ­Ù…ÙŠÙ„ ' + ADMIN_ORDERS.length + ' Ø·Ù„Ø¨.';
      statusDiv.className = 'status-message success';

      renderAdminOrdersList_();
      return true;
    } catch (err) {
      statusDiv.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ' + err.message;
      statusDiv.className = 'status-message error';
      return false;
    }
  }

  function renderAdminOrdersList_() {
    const listDiv = document.getElementById('adminOrders');
    const filter = document.getElementById('adminStatusFilter').value;
    listDiv.innerHTML = '';

    if (!ADMIN_ORDERS.length) {
      listDiv.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.';
      return;
    }

    const orders = [...ADMIN_ORDERS].sort(
      (a,b) => new Date(b.timestamp) - new Date(a.timestamp)
    );

    let html = '';
    orders.forEach(o => {
      const status = o.status || 'Ø¬Ø¯ÙŠØ¯';
      if (filter !== 'ALL' && status !== filter) return;
      html += renderAdminOrderRow_(o);
    });

    if (!html) {
      listDiv.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©.';
    } else {
      listDiv.innerHTML = html;
    }
  }

  function renderAdminOrderRow_(o) {
    const status = o.status || 'Ø¬Ø¯ÙŠØ¯';
    const badgeClass = (s => {
      if (s === 'Ø¬Ø¯ÙŠØ¯') return 'badge-new';
      if (s === 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±') return 'badge-preparing';
      if (s === 'Ø¬Ø§Ù‡Ø²') return 'badge-ready';
      if (s === 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…') return 'badge-done';
      return 'badge-new';
    })(status);

    const itemsPreview = (() => {
      try {
        const items = JSON.parse(o.itemsJson || '[]');
        return items.map(i => `${i.name} Ã— ${i.qty}`).join('ØŒ ');
      } catch {
        return '';
      }
    })();

    return `
      <div class="admin-order" data-id="${o.order_id}">
        <div class="admin-order-header">
          <div>Ø±Ù‚Ù…: ${o.order_id}</div>
          <div><span class="admin-badge ${badgeClass}">${status}</span></div>
        </div>

        <div class="admin-order-body">
          <div class="admin-order-body-row">
            <span class="label">Ø§Ù„Ø§Ø³Ù…:</span>
            <span>${escapeHtml_(o.customerName)}</span>
          </div>
          <div class="admin-order-body-row">
            <span class="label">Ù‡Ø§ØªÙ:</span>
            <span>${escapeHtml_(o.phone)}</span>
          </div>
          <div class="admin-order-body-row">
            <span class="label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</span>
            <span>${escapeHtml_(o.address)}</span>
          </div>
          <div class="admin-order-body-row">
            <span class="label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</span>
            <span>${escapeHtml_(o.notes)}</span>
          </div>
          <div class="admin-order-body-row">
            <span class="label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
            <span>${escapeHtml_(itemsPreview)}</span>
          </div>
          <div class="admin-order-body-row">
            <span class="label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
            <span>${escapeHtml_(formatDateTime_(o.timestamp))}</span>
          </div>
          <div class="admin-order-body-row">
            <span class="label">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
            <span>${o.total} Ù„.Ø³</span>
          </div>
        </div>

        <div class="admin-order-footer">
          <div>
            <select onchange="changeAdminStatus('${o.order_id}', this.value)">
              <option value="Ø¬Ø¯ÙŠØ¯" ${status === 'Ø¬Ø¯ÙŠØ¯' ? 'selected' : ''}>Ø¬Ø¯ÙŠØ¯</option>
              <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±" ${status === 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±' ? 'selected' : ''}>Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
              <option value="Ø¬Ø§Ù‡Ø²" ${status === 'Ø¬Ø§Ù‡Ø²' ? 'selected' : ''}>Ø¬Ø§Ù‡Ø²</option>
              <option value="ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…" ${status === 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…' ? 'selected' : ''}>ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
            </select>
          </div>
          <button class="btn btn-ghost" onclick="refreshSingleOrder('${o.order_id}')">ØªØ­Ø¯ÙŠØ«</button>
        </div>
      </div>
    `;
  }

  async function changeAdminStatus(orderId, newStatus) {
    if (!ADMIN_TOKEN) return;
    try {
      await fetch(API_URL, {
        method: 'POST',
        mode: 'no-cors',
        body: JSON.stringify({
          action: 'updateOrderStatus',
          adminPassword: ADMIN_TOKEN,
          orderId,
          newStatus
        })
      });

      const target = ADMIN_ORDERS.find(o => o.order_id === orderId);
      if (target) target.status = newStatus;

      renderAdminOrdersList_();

      const statusDiv = document.getElementById('adminStatus');
      statusDiv.textContent = 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ ' + orderId + ' Ø¥Ù„Ù‰ "' + newStatus + '".';
      statusDiv.className = 'status-message success';
    } catch (err) {
      const statusDiv = document.getElementById('adminStatus');
      statusDiv.textContent = 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© (ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª).';
      statusDiv.className = 'status-message error';
    }
  }

  async function refreshSingleOrder(orderId) {
    await loadAdminOrders();
  }

  document.getElementById('adminLoginBtn').addEventListener('click', adminLogin);
  document.getElementById('adminStatusFilter').addEventListener('change', renderAdminOrdersList_);

  /*********** Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© â€“ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ***********/
  async function addProduct() {
    if (!ADMIN_TOKEN) {
      document.getElementById('prodStatus').textContent = 'Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.';
      document.getElementById('prodStatus').className = 'status-message error';
      return;
    }

    const name        = document.getElementById('prodName').value.trim();
    const category    = document.getElementById('prodCategory').value.trim();
    const price       = document.getElementById('prodPrice').value.trim();
    const image_url   = document.getElementById('prodImageUrl').value.trim();
    const tags        = document.getElementById('prodTags').value.trim();
    const description = document.getElementById('prodDescription').value.trim();

    if (!name || !price) {
      document.getElementById('prodStatus').textContent = 'Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø³Ø¹Ø± Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ§Ù†.';
      document.getElementById('prodStatus').className = 'status-message error';
      return;
    }

    document.getElementById('prodStatus').textContent = 'Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬...';
    document.getElementById('prodStatus').className = 'status-message';

    try {
      await fetch(API_URL, {
        method: 'POST',
        mode: 'no-cors',
        body: JSON.stringify({
          action: 'addProduct',
          adminPassword: ADMIN_TOKEN,
          product: { name, category, price, image_url, description, tags }
        })
      });

      document.getElementById('prodStatus').textContent = 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­ ğŸŒ¹';
      document.getElementById('prodStatus').className = 'status-message success';

      // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
      document.getElementById('prodName').value = '';
      document.getElementById('prodCategory').value = '';
      document.getElementById('prodPrice').value = '';
      document.getElementById('prodImageUrl').value = '';
      document.getElementById('prodTags').value = '';
      document.getElementById('prodDescription').value = '';

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
      await loadProducts();
    } catch (err) {
      document.getElementById('prodStatus').textContent = 'Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: ' + err.message;
      document.getElementById('prodStatus').className = 'status-message error';
    }
  }

  function renderAdminProductsList() {
    const listDiv = document.getElementById('adminProductsList');
    if (!listDiv) return;
    listDiv.innerHTML = '';

    if (!PRODUCTS.length) {
      listDiv.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯.';
      return;
    }

    const latest = [...PRODUCTS].slice(-20).reverse(); // Ø¢Ø®Ø± 20 Ù…Ù†ØªØ¬
    latest.forEach(p => {
      const row = document.createElement('div');
      row.className = 'admin-product-item';

      const thumb = document.createElement('div');
      thumb.className = 'admin-product-thumb';
      if (p.image_url) {
        thumb.style.backgroundImage = `url("${p.image_url}")`;
      }

      const info = document.createElement('div');
      info.innerHTML = `
        <div><strong>${escapeHtml_(p.name)}</strong></div>
        <div style="font-size:0.75rem;">${escapeHtml_(p.category || '')} â€¢ ${p.price} Ù„.Ø³</div>
      `;

      row.appendChild(thumb);
      row.appendChild(info);
      listDiv.appendChild(row);
    });
  }

  document.getElementById('addProductBtn').addEventListener('click', addProduct);

  /*********** ØªÙ‡ÙŠØ¦Ø© ***********/
  document.addEventListener('DOMContentLoaded', () => {
    const savedPhone = localStorage.getItem('roseCustomerPhone') || '';
    const savedName = localStorage.getItem('roseCustomerName') || '';
    const savedAddress = localStorage.getItem('roseCustomerAddress') || '';
    if (savedPhone) document.getElementById('phone').value = savedPhone;
    if (savedName) document.getElementById('customerName').value = savedName;
    if (savedAddress) document.getElementById('address').value = savedAddress;

    loadProducts();
  });
</script>

</body>
</html>
